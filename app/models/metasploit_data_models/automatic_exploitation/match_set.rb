class MetasploitDataModels::AutomaticExploitation::MatchSet < ActiveRecord::Base
  attr_accessible :user_id, :workspace_id, :minimum_rank

  has_many :runs,
           class_name: "MetasploitDataModels::AutomaticExploitation::Run",
           inverse_of: :match_set

  has_many :matches,
           class_name: "MetasploitDataModels::AutomaticExploitation::Match",
           inverse_of: :match_set,
           dependent: :destroy

  belongs_to :workspace,
             inverse_of: :automatic_exploitation_match_sets,
             class_name: "Mdm::Workspace"

  belongs_to :user,
             inverse_of: :automatic_exploitation_match_sets,
             class_name: "Mdm::User"


  validates :user,
            presence: true

  validates :workspace,
            presence: true


  Metasploit::Concern.run(self)
end
